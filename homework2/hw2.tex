\documentclass[UTF8]{ctexart}
\usepackage{geometry}
\usepackage{mathrsfs}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{subfigure}
\usepackage{algorithm2e}
\usepackage{setspace}
\usepackage{diagbox}
\usepackage{bmpsize}
\geometry{a4paper,scale=0.75}
\newcommand{\xiaosi}{\fontsize{11.6pt}{\baselineskip}\selectfont}
\newcommand{\sihao}{\fontsize{12.1pt}{\baselineskip}\selectfont}
\newcommand{\upcite}[1]{\textsuperscript{\textsuperscript{\cite{#1}}}}
\renewcommand{\baselinestretch}{1.3}

%opening
\title{数字图像处理图像配准作业}
\author{赵子瑞 \\ 自动化钱61班}
\date{2019年3月5日}
\begin{document}

\maketitle

\newenvironment{cnabandkey}[2][\sihao 摘要] % 定义中文摘要和关键词环境
{\newcommand{\ckeywords}{#2} %
	\begin{center} \bfseries #1 \end{center} %
	\begin{quotation}
	}{\paragraph{\sihao 关键词：} \textrm{\ckeywords} %
	\end{quotation}
}

\newenvironment{enabandkey}[2][\sihao Abstract] % 定义英文摘要和关键词环境
{\newcommand{\ekeywords}{#2} %
	\begin{center} \bfseries #1 \end{center} %
	\begin{quotation}
	}{\paragraph{\sihao Keywords：} \textrm{\ekeywords} %
	\end{quotation}
}

	\begin{cnabandkey}{图像配准\, 图像处理\, 仿射变换\, 矩阵计算}
        \xiaosi
        \hspace{0.25em}本文是数字图像与视频处理的第二次作业，通过理论学习和代码实践，完成了以下任务：
        
		通过手动标点，得到图像中７个位置的坐标，进行输出并保存，通过numpy进行计算仿射变换矩阵，通过仿射变换矩阵计算得到变换后的图像，输出图像。
		
		本次实验较为简单，建立在第一次实验的基础之上，提高了动手能力和对图像处理的理论理解。
		
	\end{cnabandkey}
	
	\clearpage
	
\begin{spacing}{1.2} %正文部分
\xiaosi\tableofcontents\newpage
\end{spacing}


\xiaosi
\section{项目任务}

要求根据已给的两幅图像，在各幅图像中随机找出7个点，计算出两幅图像之间的转换矩阵H，并且输出转换之后的图像。
注：已给图像分别为$Image A$和$Image B$。

\section{手动标点}

本次实验中标定的点如图\ref{interest_point_selection}所示

\begin{figure}[h!]
	\centering
	\subfigure[原图像标定点选择]{
		\label{image_a} %%first figure label
		\includegraphics[width = 0.4\textwidth]{imgasele.jpg}}
	\hspace{0.1in} \subfigure[变换后图像选择]{
		\label{image_b} %%second figure label
		\includegraphics[width = 0.4\textwidth]{imgbsele.jpg}}	
	\caption{标定点选择} 
	\label{interest_point_selection} %%label for entire figure
\end{figure}

\section{输出两幅图中对应点的坐标}

得到的坐标输出如下。

Image A 的特征点为：
	   
\[\left( \begin{array}{cc}
	\left(977.693542 , 1919.11292\right) \\
	\left(1286.59680 , 1624.91931\right) \\
	\left(1374.85486 , 1867.62903\right) \\
	\left(1749.95166 , 1316.01611\right) \\
	\left(1786.72583 , 1448.40320\right) \\
	\left(2139.75806 . 1249.82263\right) \\
	\left(2581.04834 , 2022.08069\right) 
\end{array} \right)\]

Image B的特征点位

\[\left( \begin{array}{cc}
	\left(639.600830, 1397.73987\right) \\
	\left(1015.80042, 1201.21777\right) \\
	\left(1032.64514, 1453.88916\right) \\
	\left(1537.98792, 1010.31049\right) \\
	\left(1537.98792, 1161.91333\right) \\
	\left(1931.03223, 1066.45972\right) \\
	\left(2150.01416, 1925.54236\right) 
\end{array} \right)\]

\section{计算转换矩阵}

转换矩阵的计算可以由公式\ref{Transform_Matrix}得到：

\begin{equation}
	\label{Transform_Matrix}
\end{equation}

经过计算，变换矩阵为：

\left( \begin{array}{ccc}
	0.958704864 & -0.263552481 & 208.122426  \\
	0.267151126 & 0.967908948 & -720.247315 \\
	0 & 0 & 1 
	\end{array} \right)

\section{输出在转换后的图像}

变换后的图像如图\ref{after_transform}所示。

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{test.jpg}
	\label{after_transform}
\end{figure}

\section{代码示例}

\section{小结}

本次作业，通过实践，我深入了解了图像处理的相关基础知识，同时也提高了动手能力，加深了理解和掌握程度，也让我拥有了解决实际问题的基本功。同时，代码能力也得到了有效锻炼，
我的python能力得到了有效锻炼，同时也学习了opencv的很多基本功能。我自行组织的$cv toolbox$在我的$github$上维护，欢迎访问 \newline $https://github.com/1989Ryan/Digital-Image-Processing-Project$进行了解.

\newpage

\begin{thebibliography}{}

	\bibitem{dip} Rafael C. Gonzalez，Richard E. Woods，数字图像处理. 北京: 电子工业出版社, 2017.5.

\end{thebibliography}

\clearpage

\end{document}